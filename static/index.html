<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video RAG Bot - AI-Powered Multi-Video Search</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¨ Video RAG Bot</h1>
            <p>Search multiple videos with AI ‚Ä¢ Download YouTube videos ‚Ä¢ Extract frames</p>
        </header>

        <div class="main-tabs">
            <button class="main-tab-btn active" data-tab="search">üîç Search</button>
            <button class="main-tab-btn" data-tab="download">üì• Download</button>
            <button class="main-tab-btn" data-tab="manage">üìö Manage</button>
        </div>

        <!-- Search Tab -->
        <div id="search-tab" class="main-tab-content active">
            <div class="search-section">
                <div class="search-tabs">
                    <button class="tab-btn active" data-tab="text">Text Search</button>
                    <button class="tab-btn" data-tab="time">Time Range</button>
                </div>

                <div class="video-filter">
                    <label>
                        Search in: 
                        <select id="video-filter">
                            <option value="">All Videos</option>
                        </select>
                    </label>
                </div>

                <div id="text-search" class="search-panel active">
                    <input 
                        type="text" 
                        id="text-query" 
                        placeholder="Search for content... (e.g., 'person explaining neural networks')"
                        class="search-input"
                    >
                    <button onclick="performSearch('text')" class="search-btn">
                        üîç Search
                    </button>
                </div>

                <div id="time-search" class="search-panel">
                    <div class="time-inputs">
                        <input 
                            type="text" 
                            id="start-time" 
                            placeholder="Start (MM:SS)"
                            class="time-input"
                        >
                        <span>to</span>
                        <input 
                            type="text" 
                            id="end-time" 
                            placeholder="End (MM:SS)"
                            class="time-input"
                        >
                    </div>
                    <button onclick="performSearch('time')" class="search-btn">
                        ‚è±Ô∏è Search Time Range
                    </button>
                </div>

                <div class="search-options">
                    <label>
                        Results: 
                        <select id="limit">
                            <option value="5">5</option>
                            <option value="10">10</option>
                            <option value="20">20</option>
                        </select>
                    </label>
                </div>
            </div>

            <div id="loading" class="loading hidden">
                <div class="spinner"></div>
                <p>Searching video frames...</p>
            </div>

            <div id="results" class="results-section">
                <!-- Results will be inserted here -->
            </div>
        </div>

        <!-- Download Tab -->
        <div id="download-tab" class="main-tab-content">
            <div class="download-section">
                <h2>üì• Download YouTube Video</h2>
                <p>Enter a YouTube URL to download and process the video for searching.</p>

                <div class="download-form">
                    <input 
                        type="url" 
                        id="youtube-url" 
                        placeholder="https://www.youtube.com/watch?v=..."
                        class="search-input"
                    >
                    
                    <div class="download-options">
                        <label>
                            Frame Interval: 
                            <select id="frame-interval">
                                <option value="3">3 seconds</option>
                                <option value="5" selected>5 seconds</option>
                                <option value="10">10 seconds</option>
                                <option value="15">15 seconds</option>
                            </select>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="auto-index" checked>
                            Auto-index after download
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="keep-video">
                            Keep video file (uses more disk space)
                        </label>
                    </div>

                    <button onclick="downloadVideo()" class="search-btn">
                        üì• Download & Process
                    </button>
                </div>

                <div id="download-status" class="download-status hidden">
                    <h3>üìä Processing Status</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p id="status-message">Waiting...</p>
                </div>
            </div>
        </div>

        <!-- Manage Tab -->
        <div id="manage-tab" class="main-tab-content">
            <div class="manage-section">
                <h2>üìö Video Library</h2>
                <button onclick="loadVideoList()" class="refresh-btn">üîÑ Refresh</button>
                
                <div id="video-list" class="video-list">
                    <!-- Video list will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Statistics Section (always visible) -->
        <div id="stats" class="stats-section">
            <h3>üìä Statistics</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Total Frames</span>
                    <span class="stat-value" id="total-frames">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Videos</span>
                    <span class="stat-value" id="total-videos">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Model</span>
                    <span class="stat-value" id="model">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Vector Size</span>
                    <span class="stat-value" id="vector-size">-</span>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>